!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=async e=>{const t="https://www.flipkart.com/search?marketplace=FLIPKART&q="+e;var r,n=(await(await fetch(t)).text()).split(">â‚¹"),o=[];for(r=1;r<n.length;r++)try{var s,a,l,i,c=n[r].split("</div>")[0].replace(/,/g,"");if(s=parseInt(c),1==c.split("</option>").length){try{var p=n[r-1].split("</a>"),u=p[p.length-2].split('target="_blank"');u.length>1&&(l="https://www.flipkart.com/"+u[1].split('href="')[1].split('"')[0],i=u[1].split('href="')[1].split('"')[1].split(">")[1])}catch(e){console.log("Failed to obtain product name and link from Method A"),console.log(e.message)}if(a=parseInt(s),r+1!=n.length){var d=n[r+1].split("</div>")[0].replace(/,/g,"").split("\x3c!-- --\x3e"),h=d.length>1;h&&(r++,a=parseInt(d[1]))}o.push({name:i,link:l,current_price:s,original_price:a,discounted:h})}else console.log("Ignoring amount "+s+" : Suspected to be dropdown menu item")}catch(e){console.log(e.message)}return JSON.stringify({total_result:o.length,result:o},null,2)};var o=e=>({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Methods":"GET","Access-Control-Max-Age":"86400","Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate","Your-IP":e.get("cf-connecting-ip"),"Your-Country":e.get("CF-IPCountry"),Host:e.get("host"),"Made-By":atob("VmlzaGFsIERhcyBodHRwczovL2dpdGh1Yi5jb20vZHZpc2hhbDQ4NQ==")});addEventListener("fetch",e=>{e.respondWith(async function(e){const t=o(e.headers),r=new URL(e.url).pathname;return"GET"==e.method?r.startsWith("/search/")?new Response(await n(r.replace("/search/","")),{status:200,headers:t}):new Response('{"repo":"https://github.com/dvishal485/flipkart-scraper/"}',{status:200,headers:t}):Response.redirect("https://github.com/dvishal485/flipkart-scraper/",301)}(e.request))})}]);